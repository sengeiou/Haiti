package com.aimir.fep.meter;

import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.aimir.constants.CommonConstants.MeterType;
import com.aimir.fep.meter.parser.DLMSClou;
import com.aimir.fep.meter.parser.DLMSClouTable.DLMSVARIABLE.METER_DEVICE_MODEL;
import com.aimir.fep.util.DataUtil;
import com.aimir.model.device.EnergyMeter;
import com.aimir.model.system.Code;
import com.aimir.model.system.DeviceModel;

public class CLOUTest {
	private static Logger logger = LoggerFactory.getLogger(CLOUTest.class);
	
	
	@Test
    public void dlmsClouTest(){
    	String meta = "00002A0000FF00010200120910434C45313035343139393030313830380000600100FF000102000D090B35343139393030313830380000600101FF00010200120910436C6F7520456C656374726F6E6963730000600104FF00010200060904000000000000605B09FF000102000211060000605B0BFF000102000211D10100000200FF00010200060904303130310100000201FF000102000F090D4B32322D4854353032332D3031000060030AFF004602000203000100630100FF000704000506000003840100630100FF000702017201080207090C07E3061202021E00FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202022D00FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202030000FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202030F00FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202031E00FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202032D00FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202040000FF8000000600000000060000000006000000000600000000060000000006000000000207090C07E3061202040F00FF8000000600000000060000000006000000000600000000060000000006000000000100620100FF000702000201000000636200FF000702000201000000636201FF000702000201000000636202FF00070200020100";
    	DLMSClou target = new DLMSClou();
    	EnergyMeter meter = new EnergyMeter();
    	try {
    		meter.setModel(new DeviceModel());
        	meter.getModel().setName(METER_DEVICE_MODEL.CL710K22.name());
        	meter.setMeterType(new Code());
        	meter.getMeterType().setName(MeterType.EnergyMeter.name());
    		target.setMeter(meter);
    		target.parse(DataUtil.readByteString(meta));
		} catch (Exception e) {
			System.out.println();
			System.out.println("Exception Cause");
			System.out.println(e.toString());
			e.printStackTrace();
		}
    }
}
