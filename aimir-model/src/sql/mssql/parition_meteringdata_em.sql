USE [aimirdb]
GO
BEGIN TRANSACTION
CREATE PARTITION FUNCTION [meteringdata_em_part_func](varchar(8)) AS RANGE RIGHT FOR VALUES (N'20140101', N'20140601', N'20150101', N'20150601', N'20160101', N'20160601', N'20170101', N'20170601', N'20180101', N'20180601', N'20190101', N'20190601')


CREATE PARTITION SCHEME [meteringdata_em_part_scheme] AS PARTITION [meteringdata_em_part_func] TO ([PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY], [PRIMARY])


ALTER TABLE [dbo].[METERINGDATA_EM] DROP CONSTRAINT [PK__METERING__59FBB2A809FE775D]


ALTER TABLE [dbo].[METERINGDATA_EM] ADD PRIMARY KEY NONCLUSTERED 
(
	[yyyymmddhhmmss] ASC,
	[dst] ASC,
	[mdev_id] ASC,
	[mdev_type] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]


CREATE CLUSTERED INDEX [ClusteredIndex_on_meteringdata_em_part_scheme_635398879610048587] ON [dbo].[METERINGDATA_EM] 
(
	[yyyymmdd]
)WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF) ON [meteringdata_em_part_scheme]([yyyymmdd])


DROP INDEX [ClusteredIndex_on_meteringdata_em_part_scheme_635398879610048587] ON [dbo].[METERINGDATA_EM] WITH ( ONLINE = OFF )




COMMIT TRANSACTION


