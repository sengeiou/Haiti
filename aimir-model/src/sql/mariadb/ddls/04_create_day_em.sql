DROP TABLE AIMIR.DAY_EM;
CREATE TABLE AIMIR.DAY_EM
(
MDEV_ID VARCHAR(20) NOT NULL,
YYYYMMDD VARCHAR(8) NOT NULL,
CHANNEL VARCHAR(3) NOT NULL,
MDEV_TYPE VARCHAR(20) NOT NULL,
DST DECIMAL(38) NOT NULL,
HH VARCHAR(2) NOT NULL,
METER_ID BIGINT,
METERINGTYPE TINYINT,
MDEV_ID_LAST TINYINT,
MODEM_ID BIGINT,
DEVICE_ID VARCHAR(20),
DEVICE_TYPE VARCHAR(15),
C_VALUE BIGINT,
BASEVALUE DECIMAL(19, 4),
VALUE DECIMAL(19, 4),
WRITEDATE VARCHAR(14),
SUPPLIER_ID BIGINT,
CH_METHOD VARCHAR(255),
CONTRACT_ID BIGINT,
ENDDEVICE_ID BIGINT
)
PARTITION BY RANGE (YYYYMMDD)
(
PARTITION DAY_EM_201901 VALUES LESS THAN ('201902'),
PARTITION DAY_EM_201902 VALUES LESS THAN ('201903'),
PARTITION DAY_EM_201903 VALUES LESS THAN ('201904'),
PARTITION DAY_EM_201904 VALUES LESS THAN ('201905'),
PARTITION DAY_EM_201905 VALUES LESS THAN ('201906'),
PARTITION DAY_EM_201906 VALUES LESS THAN ('201907'),
PARTITION DAY_EM_201907 VALUES LESS THAN ('201908'),
PARTITION DAY_EM_201908 VALUES LESS THAN ('201909'),
PARTITION DAY_EM_201909 VALUES LESS THAN ('201910'),
PARTITION DAY_EM_201910 VALUES LESS THAN ('201911'),
PARTITION DAY_EM_201911 VALUES LESS THAN ('201912'),
PARTITION DAY_EM_201912 VALUES LESS THAN ('202001'),
PARTITION DAY_EM_202001 VALUES LESS THAN ('202002'),
PARTITION DAY_EM_202002 VALUES LESS THAN ('202003'),
PARTITION DAY_EM_202003 VALUES LESS THAN ('202004'),
PARTITION DAY_EM_202004 VALUES LESS THAN ('202005'),
PARTITION DAY_EM_202005 VALUES LESS THAN ('202006'),
PARTITION DAY_EM_202006 VALUES LESS THAN ('202007'),
PARTITION DAY_EM_202007 VALUES LESS THAN ('202008'),
PARTITION DAY_EM_202008 VALUES LESS THAN ('202009'),
PARTITION DAY_EM_202009 VALUES LESS THAN ('202010'),
PARTITION DAY_EM_202010 VALUES LESS THAN ('202011'),
PARTITION DAY_EM_202011 VALUES LESS THAN ('202012'),
PARTITION DAY_EM_202012 VALUES LESS THAN ('202101')
);
CREATE INDEX AIMIR.PK_DAY_EM ON AIMIR.DAY_EM (MDEV_ID, YYYYMMDD, CHANNEL, MDEV_TYPE, DST, HH);
ALTER TABLE AIMIR.DAY_EM ADD CONSTRAINT PK_DAY_EM PRIMARY KEY (MDEV_ID, YYYYMMDD, CHANNEL, MDEV_TYPE, DST, HH);
