--Tablespace는 사이트에 따라 변경될 수 있음.
--사전 생성하는 Partition의 범위가 충분한 지 확인할 것.
--컬럼 추가 혹은 순서 변경시 프로시저와 동일하게 맞출 것.
DROP TABLE AIMIR.DAY_WM;
CREATE TABLE AIMIR.DAY_WM
(
    MDEV_ID VARCHAR2(20) NOT NULL,
    YYYYMMDD VARCHAR2(8) NOT NULL,
    CHANNEL VARCHAR2(3) NOT NULL,
    MDEV_TYPE VARCHAR2(20) NOT NULL,
    DST NUMBER(2) NOT NULL,
    HH VARCHAR2(2) NOT NULL,
    METER_ID NUMBER(10),
    METERINGTYPE NUMBER(2),
    MDEV_ID_LAST NUMBER(1),
    MODEM_ID NUMBER(10),
    DEVICE_ID VARCHAR2(20),
    DEVICE_TYPE VARCHAR2(15),
    C_VALUE NUMBER(10),
    BASEVALUE NUMBER(19, 4),
    VALUE NUMBER(19, 4),
    WRITEDATE VARCHAR2(14),
    SUPPLIER_ID NUMBER(10),
    CH_METHOD VARCHAR2(255),
    CONTRACT_ID NUMBER(10),
    ENDDEVICE_ID NUMBER(10)
)
TABLESPACE AIMIRDAT
NOLOGGING
PARTITION BY RANGE (YYYYMMDD)
(
PARTITION DAY_WM_201901 VALUES LESS THAN ('201902'),
PARTITION DAY_WM_201902 VALUES LESS THAN ('201903'),
PARTITION DAY_WM_201903 VALUES LESS THAN ('201904'),
PARTITION DAY_WM_201904 VALUES LESS THAN ('201905'),
PARTITION DAY_WM_201905 VALUES LESS THAN ('201906'),
PARTITION DAY_WM_201906 VALUES LESS THAN ('201907'),
PARTITION DAY_WM_201907 VALUES LESS THAN ('201908'),
PARTITION DAY_WM_201908 VALUES LESS THAN ('201909'),
PARTITION DAY_WM_201909 VALUES LESS THAN ('201910'),
PARTITION DAY_WM_201910 VALUES LESS THAN ('201911'),
PARTITION DAY_WM_201911 VALUES LESS THAN ('201912'),
PARTITION DAY_WM_201912 VALUES LESS THAN ('202001'),
PARTITION DAY_WM_202001 VALUES LESS THAN ('202002'),
PARTITION DAY_WM_202002 VALUES LESS THAN ('202003'),
PARTITION DAY_WM_202003 VALUES LESS THAN ('202004'),
PARTITION DAY_WM_202004 VALUES LESS THAN ('202005'),
PARTITION DAY_WM_202005 VALUES LESS THAN ('202006'),
PARTITION DAY_WM_202006 VALUES LESS THAN ('202007'),
PARTITION DAY_WM_202007 VALUES LESS THAN ('202008'),
PARTITION DAY_WM_202008 VALUES LESS THAN ('202009'),
PARTITION DAY_WM_202009 VALUES LESS THAN ('202010'),
PARTITION DAY_WM_202010 VALUES LESS THAN ('202011'),
PARTITION DAY_WM_202011 VALUES LESS THAN ('202012'),
PARTITION DAY_WM_202012 VALUES LESS THAN ('202101')
);
CREATE INDEX AIMIR.PK_DAY_WM ON AIMIR.DAY_WM (MDEV_ID, YYYYMMDD, CHANNEL, MDEV_TYPE, DST, HH) LOCAL;
ALTER TABLE AIMIR.DAY_WM ADD CONSTRAINT PK_DAY_WM PRIMARY KEY (MDEV_ID, YYYYMMDD, CHANNEL, MDEV_TYPE, DST, HH);
